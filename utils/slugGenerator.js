// ============================================
// utils/slugGenerator.js
// ============================================

/**
 * Генерация slug из текста с поддержкой словацких символов
 * @param {string} text - исходный текст
 * @returns {string} - сгенерированный slug
 * 
 * Примеры:
 * "Ján Nováк" -> "jan-novak"
 * "Финансовые новости" -> "finansove-novosti"
 * "Martin Kováč" -> "martin-kovac"
 */
function generateSlug(text) {
  // Таблица транслитерации для словацкого языка
  const slovakTranslitMap = {
    // Нижний регистр
    'á': 'a', 'ä': 'a', 'č': 'c', 'ď': 'd',
    'é': 'e', 'í': 'i', 'ĺ': 'l', 'ľ': 'l',
    'ň': 'n', 'ó': 'o', 'ô': 'o', 'ŕ': 'r',
    'š': 's', 'ť': 't', 'ú': 'u', 'ý': 'y', 'ž': 'z',
    // Верхний регистр
    'Á': 'A', 'Ä': 'A', 'Č': 'C', 'Ď': 'D',
    'É': 'E', 'Í': 'I', 'Ĺ': 'L', 'Ľ': 'L',
    'Ň': 'N', 'Ó': 'O', 'Ô': 'O', 'Ŕ': 'R',
    'Š': 'S', 'Ť': 'T', 'Ú': 'U', 'Ý': 'Y', 'Ž': 'Z'
  };

  return text
    .split('') // Разбиваем на символы
    .map(char => slovakTranslitMap[char] || char) // Транслитерируем словацкие символы
    .join('') // Собираем обратно
    .toLowerCase() // Приводим к нижнему регистру
    .normalize('NFD') // Нормализуем для удаления оставшихся диакритических знаков
    .replace(/[\u0300-\u036f]/g, '') // Удаляем диакритические знаки
    .replace(/[^\w\s-]/g, '') // Удаляем все кроме букв, цифр, пробелов и дефисов
    .replace(/\s+/g, '-') // Заменяем пробелы на дефисы
    .replace(/-+/g, '-') // Заменяем множественные дефисы на один
    .replace(/^-+|-+$/g, '') // Удаляем дефисы в начале и конце
    .trim(); // Удаляем пробелы по краям
}

export default generateSlug;